# Copyright (c) 2026, Alexei Znamensky (@russoz)
# GNU General Public License v3.0+ (see LICENSES/GPL-3.0-or-later.txt or https://www.gnu.org/licenses/gpl-3.0.txt)
# SPDX-License-Identifier: GPL-3.0-or-later

---
- name: "Gather system facts"
  community.openwrt.setup:
  register: setup_result

- name: Assert setup gathered facts
  ansible.builtin.assert:
    that:
      - setup_result is succeeded
      - setup_result.ansible_facts is defined

- name: Assert ansible_os_family is defined
  ansible.builtin.assert:
    that:
      - setup_result.ansible_facts.ansible_os_family is defined
